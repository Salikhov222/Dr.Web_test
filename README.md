# Dr.Web_test

## Описание

Реализовать сервис, который предоставит HTTP API для загрузки (upload), скачивания (download) и удаления файлов.

**Upload:** 
1) авторизованный пользователь загружает файл; 
2) файл сохраняется на диск в следующую структуру каталогов: store/ab/abcdef12345... где "abcdef12345..." - имя файла, совпадающее с его хэшем. /ab/ - подкаталог, состоящий из первых двух символов хэша файла. Алгоритм хэширования - на ваш выбор.
3) возвращает хэш загруженного файла;

**Delete:**
1) авторизованный пользователь передает хэш файла, который необходимо удалить; 
2) если по хешу файл удалось найти в локальном хранилище, и файл принадлежит пользователю, то файл пользователя удаляется;

**Download:**
 1) любой пользователь передаёт параметр - хэш файла; 
 2) если по хешу файл удалось найти в локальном хранилище, то возвращаем файл;

Тип авторизации пользователей: Basic. Регистрация пользователей в сервисе не предусмотрена.

## Технические требования

Основные требования: - Python 3.x; - Flask (желательно), aiohttp (только если был реальный опыт использования);

## Инструкция по запуску приложения

1. Склонировать проект локально
2. Запустить проект с использованием команды `make all`, которая выполнит миграции, сборку и развертывание сервисов
3. Перейти по адресу <http://127.0.0.1:5000/docs> для просмотра интерактивной документации Swagger и тестирования

## P.S.

В ТЗ указано, что регистрация не предусмотрена, следовательно, я предположил, что для тестирования приложения в БД 
должны быть созданы по умолчанию несколько пользователей (username:password):
 - admin:admin
 - guest:guest

Так как в требованиях не была указана БД, то я использовал SQLite3 - это более простой вариант и таблиц для выполнения
не много, и вполне можно было обойтись и без БД.

### Основные моменты при выполнении задания
1) Возможность загрузки разными пользователями одинаковых файлов - в локальном хранилище хранится один экземпляр, создается
связь этого файла со всеми пользователями, которые его загружали
2) Так же при удалении файла, который связан с несколькими пользователями, удаляется связь в связующей таблице, а из хранилища
файл удаляется, если соответственно он ни с кем не связан
